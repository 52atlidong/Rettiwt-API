FROM node:18.12-alpine3.17
WORKDIR /app
COPY ./package.json .
RUN npm install
COPY . .
ARG USE_CACHE=false
ARG APP_PORT=3000
ARG CACHE_DB_URL=redis://cache:6379
ARG DATA_DB_URL=mongodb://data:27017
ARG STORE_LOGS=false
ENV USE_CACHE=${USE_CACHE}
ENV APP_PORT=${APP_PORT}
ENV CACHE_DB_URL=${CACHE_DB_URL}
ENV DATA_DB_URL=${DATA_DB_URL}
ENV STORE_LOGS=${STORE_LOGS}
CMD npm run start